<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.calculatedfun.dao.CoinSearchMapper" >
    <resultMap id="coindetail" type="com.calculatedfun.bean.CoinDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 10 10:25:33 CST 2013.
    -->
    <!-- <id column="id" property="id" jdbcType="INTEGER" /> -->
	<!-- <result column="number" property="number" jdbcType="VARCHAR" /> -->
    <result column="number" property="number" jdbcType="VARCHAR" />
    <result column="detailstr" property="detailstr" jdbcType="VARCHAR" />
    <result column="score" property="score" jdbcType="INTEGER" />
    <result column="url" property="url" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="selectCoinDetailByNumber" resultMap="coindetail" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 10 10:25:33 CST 2013.
    -->
    
   
    	SELECT
    	ide.number as number,
    	ide.detailstr as detailstr,
    	ide.score as score,
    	img.url as url
    	
    	FROM COIN_IDENTIFY ide LEFT JOIN COIN_IMG img ON ide.number = img.number 
    	WHERE 1=1
    	<if test="number !=null and number !=''">
    	    and number = #{number}
    	</if>
  </select>
  
  <select id="selectCoinDetailByKeyWord" resultMap="coindetail" parameterType="java.lang.String" >
      SELECT 
      t1.number as number,
      t1.detailstr as detailstr,
      t1.score as score,
      t2.url as url
      FROM COIN_IDENTIFY t1 LEFT JOIN COIN_IMG t2 ON t1.number = t2.number 
      WHERE instr(detailstr,#{str1}) 
      AND instr(detailstr,#{str1}) 
      AND instr(detailstr,#{str1})
  </select>
</mapper>